# Comparing `tmp/aiavatar-0.5.3-py3-none-any.whl.zip` & `tmp/aiavatar-0.5.4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,33 +1,33 @@
-Zip file size: 37832 bytes, number of entries: 31
+Zip file size: 38057 bytes, number of entries: 31
 -rw-r--r--  2.0 unx      712 b- defN 24-May-02 02:42 aiavatar/__init__.py
 -rw-r--r--  2.0 unx     3407 b- defN 24-May-05 01:03 aiavatar/avatar.py
 -rw-r--r--  2.0 unx     7813 b- defN 24-May-12 04:21 aiavatar/bot.py
--rw-r--r--  2.0 unx     2196 b- defN 24-May-12 05:14 aiavatar/animation/__init__.py
--rw-r--r--  2.0 unx     1535 b- defN 24-May-12 05:15 aiavatar/animation/vrchat.py
+-rw-r--r--  2.0 unx     2196 b- defN 24-May-12 06:14 aiavatar/animation/__init__.py
+-rw-r--r--  2.0 unx     1535 b- defN 24-May-12 06:14 aiavatar/animation/vrchat.py
 -rw-r--r--  2.0 unx        0 b- defN 24-May-05 04:55 aiavatar/api/__init__.py
--rw-r--r--  2.0 unx     6114 b- defN 24-May-12 06:02 aiavatar/api/router.py
--rw-r--r--  2.0 unx     2502 b- defN 24-May-12 06:06 aiavatar/api/schema.py
+-rw-r--r--  2.0 unx     6114 b- defN 24-May-12 06:14 aiavatar/api/router.py
+-rw-r--r--  2.0 unx     2502 b- defN 24-May-12 06:14 aiavatar/api/schema.py
 -rw-r--r--  2.0 unx       31 b- defN 24-Apr-14 09:42 aiavatar/device/__init__.py
 -rw-r--r--  2.0 unx     3790 b- defN 24-Apr-20 03:57 aiavatar/device/audio.py
--rw-r--r--  2.0 unx     2052 b- defN 24-May-12 04:37 aiavatar/face/__init__.py
--rw-r--r--  2.0 unx     1709 b- defN 24-May-12 04:39 aiavatar/face/vrchat.py
+-rw-r--r--  2.0 unx     2052 b- defN 24-May-12 06:14 aiavatar/face/__init__.py
+-rw-r--r--  2.0 unx     1709 b- defN 24-May-12 06:14 aiavatar/face/vrchat.py
 -rw-r--r--  2.0 unx     8322 b- defN 24-May-12 04:21 aiavatar/listeners/__init__.py
 -rw-r--r--  2.0 unx     2773 b- defN 24-May-05 04:46 aiavatar/listeners/azurevoicerequest.py
 -rw-r--r--  2.0 unx     4951 b- defN 24-May-05 04:46 aiavatar/listeners/azurewakeword.py
 -rw-r--r--  2.0 unx      976 b- defN 24-May-12 04:21 aiavatar/listeners/voicerequest.py
 -rw-r--r--  2.0 unx     1132 b- defN 24-May-12 04:21 aiavatar/listeners/wakeword.py
 -rw-r--r--  2.0 unx      178 b- defN 24-Apr-14 09:42 aiavatar/processors/__init__.py
--rw-r--r--  2.0 unx     6162 b- defN 24-May-05 11:17 aiavatar/processors/chatgpt.py
+-rw-r--r--  2.0 unx     6490 b- defN 24-May-12 06:53 aiavatar/processors/chatgpt.py
 -rw-r--r--  2.0 unx     3110 b- defN 24-May-05 11:34 aiavatar/processors/claude.py
 -rw-r--r--  2.0 unx     3388 b- defN 24-May-05 11:43 aiavatar/processors/gemini.py
 -rw-r--r--  2.0 unx     2549 b- defN 24-May-05 13:35 aiavatar/speech/__init__.py
 -rw-r--r--  2.0 unx     1887 b- defN 24-May-05 01:03 aiavatar/speech/azurespeech.py
 -rw-r--r--  2.0 unx     1201 b- defN 24-May-05 13:35 aiavatar/speech/voicevox.py
 -rw-r--r--  2.0 unx      220 b- defN 24-Apr-16 15:07 aiavatar/speech/soundplayers/__init__.py
 -rw-r--r--  2.0 unx     2145 b- defN 24-Apr-20 04:04 aiavatar/speech/soundplayers/sounddevice_player.py
--rw-r--r--  2.0 unx    11324 b- defN 24-May-12 06:13 aiavatar-0.5.3.dist-info/LICENSE
--rw-r--r--  2.0 unx    24561 b- defN 24-May-12 06:13 aiavatar-0.5.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-12 06:13 aiavatar-0.5.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        9 b- defN 24-May-12 06:13 aiavatar-0.5.3.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2604 b- defN 24-May-12 06:13 aiavatar-0.5.3.dist-info/RECORD
-31 files, 109445 bytes uncompressed, 33648 bytes compressed:  69.3%
+-rw-r--r--  2.0 unx    11324 b- defN 24-May-12 06:58 aiavatar-0.5.4.dist-info/LICENSE
+-rw-r--r--  2.0 unx    25214 b- defN 24-May-12 06:58 aiavatar-0.5.4.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-12 06:58 aiavatar-0.5.4.dist-info/WHEEL
+-rw-r--r--  2.0 unx        9 b- defN 24-May-12 06:58 aiavatar-0.5.4.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2604 b- defN 24-May-12 06:58 aiavatar-0.5.4.dist-info/RECORD
+31 files, 110426 bytes uncompressed, 33873 bytes compressed:  69.3%
```

## zipnote {}

```diff
@@ -72,23 +72,23 @@
 
 Filename: aiavatar/speech/soundplayers/__init__.py
 Comment: 
 
 Filename: aiavatar/speech/soundplayers/sounddevice_player.py
 Comment: 
 
-Filename: aiavatar-0.5.3.dist-info/LICENSE
+Filename: aiavatar-0.5.4.dist-info/LICENSE
 Comment: 
 
-Filename: aiavatar-0.5.3.dist-info/METADATA
+Filename: aiavatar-0.5.4.dist-info/METADATA
 Comment: 
 
-Filename: aiavatar-0.5.3.dist-info/WHEEL
+Filename: aiavatar-0.5.4.dist-info/WHEEL
 Comment: 
 
-Filename: aiavatar-0.5.3.dist-info/top_level.txt
+Filename: aiavatar-0.5.4.dist-info/top_level.txt
 Comment: 
 
-Filename: aiavatar-0.5.3.dist-info/RECORD
+Filename: aiavatar-0.5.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## aiavatar/processors/chatgpt.py

```diff
@@ -28,23 +28,25 @@
 
     @property
     def response_type(self):
         return "function_call" if self.function_name else "content"
 
 
 class ChatGPTProcessor(ChatProcessor):
-    def __init__(self, api_key: str, model: str="gpt-3.5-turbo", temperature: float=1.0, max_tokens: int=0, functions: dict=None, system_message_content: str=None, history_count: int=10, history_timeout: float=60.0):
+    def __init__(self, *, api_key: str, base_url: str=None, model: str="gpt-3.5-turbo", temperature: float=1.0, max_tokens: int=0, functions: dict=None, parse_function_call_in_response: bool=True, system_message_content: str=None, history_count: int=10, history_timeout: float=60.0):
         self.logger = getLogger(__name__)
         self.logger.addHandler(NullHandler())
 
         self.api_key = api_key
+        self.base_url = base_url
         self.model = model
         self.temperature = temperature
         self.max_tokens = max_tokens
         self.functions = functions or {}
+        self.parse_function_call_in_response = parse_function_call_in_response
         self.system_message_content = system_message_content
         self.history_count = history_count
         self.history_timeout = history_timeout
         self.histories = []
         self.last_chat_at = datetime.utcnow()
         self.on_start_processing = None
 
@@ -83,26 +85,29 @@
             params["max_tokens"] = self.max_tokens
 
         if call_functions and self.functions:
             params["functions"] = [v.get_spec() for _, v in self.functions.items()]
 
         stream_resp = ChatCompletionStreamResponse(await async_client.chat.completions.create(**params))
 
-        async for chunk in stream_resp.stream:
-            if chunk:
-                delta = chunk.choices[0].delta
-                if delta.function_call:
-                    stream_resp.function_name = delta.function_call.name
-                break
-        
+        if self.parse_function_call_in_response:
+            async for chunk in stream_resp.stream:
+                if chunk:
+                    delta = chunk.choices[0].delta
+                    if delta.function_call:
+                        stream_resp.function_name = delta.function_call.name
+                    break
+
         return stream_resp
 
     async def chat(self, text: str) -> AsyncGenerator[str, None]:
         try:
             async_client = AsyncClient(api_key=self.api_key)
+            if self.base_url:
+                async_client.base_url = self.base_url
 
             if (datetime.utcnow() - self.last_chat_at).total_seconds() > self.history_timeout:
                 self.reset_histories()
 
             if self.on_start_processing:
                 await self.on_start_processing()
```

## Comparing `aiavatar-0.5.3.dist-info/LICENSE` & `aiavatar-0.5.4.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `aiavatar-0.5.3.dist-info/METADATA` & `aiavatar-0.5.4.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: aiavatar
-Version: 0.5.3
+Version: 0.5.4
 Summary: 🥰 Building AI-based conversational avatars lightning fast ⚡️💬
 Home-page: https://github.com/uezo/aiavatar
 Author: uezo
 Author-email: uezo@uezo.net
 Maintainer: uezo
 Maintainer-email: uezo@uezo.net
 License: Apache v2
@@ -94,14 +94,15 @@
   - [🍓 Raspberry Pi](#-raspberry-pi)
 - [🧩 RESTful APIs](#-restful-apis)
 - [🤿 Deep Dive](#-deep-dive)
   - [⚡️ Function Calling](#️-function-calling)
 - [🔍 Other Tips](#-other-tips)
   - [🎤 Testing Audio I/O](#-testing-audio-io)
   - [🎚️ Noise Filter](#-noise-filter)
+  - [🧪 LM Studio API](#-lm-studio-api)
   - [⚡️ Use Custom Listener](#️-use-custom-listener)
 
 
 # 📕 Configuration Guide
 
 Here are the configuration for each component.
 
@@ -821,14 +822,41 @@
     google_api_key=GOOGLE_API_KEY,
     auto_noise_filter_threshold=False,
     volume_threshold_db=-40   # Set the voice detection threshold to -40 dB
 )
 ```
 
 
+## 🧪 LM Studio API
+
+Use ChatGPTProcessor with some arguments.
+
+- base_url: URL for LM Studio local server
+- model: Name of model
+- parse_function_call_in_response: Always set `False`
+
+```python
+from aiavatar import AIAvatar
+from aiavatar.processors.chatgpt import ChatGPTProcessor
+
+chat_processor = ChatGPTProcessor(
+    api_key=OPENAI_API_KEY,
+    base_url="http://127.0.0.1:1234/v1",
+    model="mmnga/DataPilot-ArrowPro-7B-KUJIRA-gguf",
+    parse_function_call_in_response=False
+)
+
+app = AIAvatar(
+    google_api_key=GOOGLE_API_KEY,
+    chat_processor=chat_processor
+)
+app.start_listening_wakeword()
+```
+
+
 ## ⚡️ Use custom listener
 
 It's very easy to add your original listeners. Just make it run on other thread and invoke `app.start_chat()` when the listener handles the event.
 
 Here the example of `FileSystemListener` that invokes chat when `test.txt` is found on the file system.
 
 ```python
```

## Comparing `aiavatar-0.5.3.dist-info/RECORD` & `aiavatar-0.5.4.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -12,20 +12,20 @@
 aiavatar/face/vrchat.py,sha256=lG_S7QEG-tK7yHpT4qk1sGKZwD7tiRYDfs8AsMtGkoI,1709
 aiavatar/listeners/__init__.py,sha256=uCNw86Q1ctwDB9vX-ypZ1CnSOLpss2DIb0PMITAk5jg,8322
 aiavatar/listeners/azurevoicerequest.py,sha256=3DHxZl9uPLEvVH2c1gpbBmwUcVFlPaOzyO35JrIXyoc,2773
 aiavatar/listeners/azurewakeword.py,sha256=2GP_bUi56oFjARXGKFHES_KztA_MBNdiXkbYkor1eCQ,4951
 aiavatar/listeners/voicerequest.py,sha256=6h86YcMXUX_yFd5AAMo4zeQ80xhPTUwhSCQzgWd4ZuY,976
 aiavatar/listeners/wakeword.py,sha256=ZEGGKn5gmNZ8woSUKEbgLJX7o5iR3JD1rG3rRhoehoY,1132
 aiavatar/processors/__init__.py,sha256=k6qF1_UopWpaxQ89OxP7-dSVLgnrDCuuZH0Gom0JLLU,178
-aiavatar/processors/chatgpt.py,sha256=CyMpH_Nq-HtM50eFMFmOF7cJezk5x6VOHq9OxeTYFBU,6162
+aiavatar/processors/chatgpt.py,sha256=bUx7PqP6yvZno5-Q-m2Eh4ojnIiMgsBl8x1hvVI5KDQ,6490
 aiavatar/processors/claude.py,sha256=c56BtK4Qsi-I4tQw0J_Jvflgu9bNXpCVV-EMqZEMhV0,3110
 aiavatar/processors/gemini.py,sha256=9cRMEpxFHsoxABysoPch-CPMUkRdD0-gO5AaqxRsuYk,3388
 aiavatar/speech/__init__.py,sha256=dwDsV_gvum9MYQI0YeSUkkPSH-Wl-EN-dVE9Isy9Am0,2549
 aiavatar/speech/azurespeech.py,sha256=P8lnUMj4j8BRnasxCxCb-xkkFA13BvHUG03aZ04RXNU,1887
 aiavatar/speech/voicevox.py,sha256=ptPd9z8ht1V1RLABpCn0V6WqC2XP8Xq6W4n2VkxFxFI,1201
 aiavatar/speech/soundplayers/__init__.py,sha256=71xYi-8qaInz_Um8wV5zDaHpAB5sTJG9osn17aQAUKQ,220
 aiavatar/speech/soundplayers/sounddevice_player.py,sha256=tBHMJ5eOiM_rKkvCWlBPE0254Ro4lcNkq8XWLB2tHP8,2145
-aiavatar-0.5.3.dist-info/LICENSE,sha256=UOZ1F5fFDe3XXvG4oNnkL1-Ecun7zpHzRxjp-XsMeAo,11324
-aiavatar-0.5.3.dist-info/METADATA,sha256=XbhDR8M-jHnLe9lMUqh1wEZSRIuJIxH4eKHubKwKSKw,24561
-aiavatar-0.5.3.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-aiavatar-0.5.3.dist-info/top_level.txt,sha256=B14WVaakM_kKuOkCeI-WRP83BJ6APkOyQrn6EXxs8kg,9
-aiavatar-0.5.3.dist-info/RECORD,,
+aiavatar-0.5.4.dist-info/LICENSE,sha256=UOZ1F5fFDe3XXvG4oNnkL1-Ecun7zpHzRxjp-XsMeAo,11324
+aiavatar-0.5.4.dist-info/METADATA,sha256=o9eRQWD2TWDTppxz0qXuwgCk19S9MnCmWRZ0mObMDEc,25214
+aiavatar-0.5.4.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+aiavatar-0.5.4.dist-info/top_level.txt,sha256=B14WVaakM_kKuOkCeI-WRP83BJ6APkOyQrn6EXxs8kg,9
+aiavatar-0.5.4.dist-info/RECORD,,
```

